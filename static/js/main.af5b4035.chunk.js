(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t){},26:function(e,t,a){e.exports=a(44)},36:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),c=a.n(i),l=a(7),s=a(8),o=a(6),u=a(2),d=a.n(u),m=function(e){var t=e.split("T")[0],a=e.split("T")[1].slice(0,-1);return d()("".concat(t," ").concat(a),"YYYYMMDD HHmmss").toDate()},f=function(e){var t=e.split("T")[1].slice(0,-1);return d()("".concat(t),"HHmmss").utc().format("HH:mm:ss")},h=function(e){return d()("".concat(e.split("T")[0]),"YYYYMMDDxxx").format("YYYY-MM-DD").split("T")[0]},p=function(e){var t=e.map(function(t){return{date:h(t[e.columns[0]]),time:f(t[e.columns[0]])}});return t.push({date:h(e.columns[0]),time:m(e.columns[0])}),t.reduce(function(e,t){return e[t.date]=e[t.date]||[],e[t.date].push(t.time),e},Object.create(null))},Y=function(e){var t=e.map(function(t){return t[e.columns[0]].replace(/[-:.]/g,"")}).map(function(e){return{timestamp:h(e)}});t.push({timestamp:h(e.columns[0])});var a=t.map(function(e){return e.timestamp});return a.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{})},v={data:[],dayInsights:[],files:[]},y={isCalendarVisible:!1,showTooltip:!1,yearIndex:0},D={isRadialChartVisible:!1,selectedDay:null},b=Object(s.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return Object(o.a)({},e,{data:Y(t.val),dayInsights:p(t.val)});case"UPLOAD_FILE":return Object(o.a)({},e,{files:t.val});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_CALENDAR":return Object(o.a)({},e,{isCalendarVisible:t.val});case"SHOW_TOOLTIP":return Object(o.a)({},e,{showTooltip:t.val});case"CHANGE_YEAR":return Object(o.a)({},e,{currentYear:parseInt(e.currentYear)+t.val,yearIndex:e.yearIndex+t.val});default:return e}},radialChart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_RADIAL_CHART":return Object(o.a)({},e,{isRadialChartVisible:t.val});case"SELECT_DAY":return Object(o.a)({},e,{selectedDay:t.val});default:return e}}}),g=(a(36),a(5)),E=a.n(g),O=a(23),w=a(3),M=a(9),j=a(19),C=a(20),k=a(24),N=a(21),T=a(25),A=a(4),x=Array.apply(null,Array(7)).map(function(e,t){return d()(t,"e").startOf("week").isoWeekday(t+1).format("ddd")}),I=function(){return r.a.createElement("div",{className:"dayLabelsContainer"},r.a.createElement("g",null,x.map(function(e){return r.a.createElement("text",{key:e,className:"dayLabels"},e)})))},_=function(e){return e.showTooltip&&r.a.createElement("div",{className:"tooltip",style:e.style},d()(e.showTooltip).format("dddd, MMMM DD YYYY"),r.a.createElement("div",{className:"text"},"Count: ",e.count))},S=function(e){var t=d()(e.minDate).subtract(1,"years").format("YYYY"),a=d()(e.maxDate).add(1,"years").format("YYYY"),n=t>=e.minDate.format("YYYY"),i=a<=e.maxDate.format("YYYY");return r.a.createElement("div",{className:"yearLabel"},r.a.createElement("i",{className:E()("fas fa-chevron-left",{disabled:!n}),onClick:function(){return n&&e.changeYear(-1)}}),e.minDate.format("YYYY"),r.a.createElement("i",{className:E()("fas fa-chevron-right",{disabled:!i}),onClick:function(){return i&&e.changeYear(1)}}))},H=(a(22),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(k.a)(this,Object(N.a)(t).call(this,e))).state={showTooltip:!1,renderBarChart:!1,style:{},currentYear:null,i:0},a.renderChart=a.renderChart.bind(Object(A.a)(Object(A.a)(a))),a.updateDimensions=a.updateDimensions.bind(Object(A.a)(Object(A.a)(a))),a.changeYear=a.changeYear.bind(Object(A.a)(Object(A.a)(a))),a.renderYear=a.renderYear.bind(Object(A.a)(Object(A.a)(a))),a.renderMonth=a.renderMonth.bind(Object(A.a)(Object(A.a)(a))),a.renderDay=a.renderDay.bind(Object(A.a)(Object(A.a)(a))),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"updateDimensions",value:function(){this.setState({cellSize:window.innerWidth/125,cellMargin:window.innerWidth/400})}},{key:"componentWillMount",value:function(){var e=Object.keys(this.props.data).map(function(e){return d()(e)});this.setState({currentYear:d.a.min(e).format("YYYY"),maxYear:d.a.max(e).format("YYYY"),minDate:d.a.min(e),maxDate:d.a.max(e)}),this.updateDimensions()}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{id:"calendar"},r.a.createElement(I,null),r.a.createElement(_,{style:this.state.style,showTooltip:this.state.showTooltip,count:this.state.count}),r.a.createElement(S,{minDate:this.state.minDate,maxDate:this.state.maxDate,changeYear:this.changeYear}),r.a.createElement("div",{className:"months"},this.drawCalendar(this.props.data,this.state.i)))}},{key:"changeYear",value:function(e){this.setState({currentYear:parseInt(this.state.currentYear)+e,i:this.state.i+e})}},{key:"renderChart",value:function(e){var t=d()(e).format("YYYY-MM-DD");this.props.showRadialChart(!0),this.props.selectDay(t)}},{key:"drawCalendar",value:function(e,t){var a,n,r=this.state.minDate.format("YYYY-MM-DD"),i=this.state.maxDate.format("YYYY-MM-DD"),c=w.k.range(new Date(parseInt("".concat(r.split("-")[0])),0,1),new Date(parseInt("".concat(i.split("-")[0])),11,31)),l=w.n.range(new Date(r),new Date(i)),s=l.map(function(e){return d()(e).format("YYYY")}),o=(a=c,n=c.length/12,a.reduce(function(e,t,r){return r%(a.length/n)===0&&0!==r&&e.push([]),e[e.length-1].push(t),e},[[]]));return this.renderYear(s,l[0],c,e,o)}},{key:"renderYear",value:function(e,t,a,n,i){var c=this,l=d()(this.state.currentYear).subtract(1,"years").format("YYYY"),s=d()(this.state.currentYear).add(1,"years").format("YYYY");this.state.minDate.format("YYYY"),this.state.maxDate.format("YYYY");return r.a.createElement("div",{key:t},i.map(function(e,t){return r.a.createElement("div",{className:E()("year",{hidden:t!==c.state.i}),key:t},e.map(function(e){return c.renderMonth(e,n)}))}))}},{key:"renderMonth",value:function(e,t){var a=this,n=function(e){var t=w.k.floor(e);return w.m(w.l.floor(t),w.k.offset(t,1)).length},i=this.state.cellMargin,c=this.state.cellSize,l=w.j("%B"),s=(w.j("%Y"),w.i(e,new Date(e.getFullYear(),e.getMonth()+1,1))),o=d()(e).endOf("month").format("ddd"),u=d()(e).add(1,"months").startOf("month").format("ddd"),m=0;return("Mon"===o&&"Tue"===u||"Tue"===o&&"Wed"===u)&&(m+=10),r.a.createElement("svg",{className:"month",height:7*c+8*i+20,width:c*n(e)+i*(n(e)+5)+m,key:e},r.a.createElement("g",null,r.a.createElement("text",{className:"month-name",y:7*c+8*i+15,x:(c*n(e)+i*(n(e)+1))/2,textAnchor:"middle"},l(e)),s.map(function(n){return a.renderDay(n,e,t)})))}},{key:"renderDay",value:function(e,t,a){var n=this,i=this.state.cellMargin,c=this.state.cellSize,l=!1;d()(e).format("DD-MM-YY")===d()().format("DD-MM-YY")&&(l=!0);var s,o,u,m=function(e){return(e.getDay()+6)%7},f=w.j("%W"),h=w.i(t,new Date(t.getFullYear(),t.getMonth()+1,1)).map(function(e){return Object.keys(a).find(function(t){return new Date(t).setHours(0,0,0,0)===e.setHours(0,0,0,0)})}).map(function(e){return!!e&&a[e]}).filter(function(e){return!!e}),p=Object.keys(a).find(function(t){return new Date(t).setHours(0,0,0,0)===e.setHours(0,0,0,0)}),Y=!!a[p]&&(s=a[p],o=Math.max.apply(Math,Object(M.a)(h)),u=Math.min.apply(Math,Object(M.a)(h)),(s-u)/(o-u)*.75+.25),v=a[p]?w.f(Y):"#ececec";return r.a.createElement("rect",{key:e,className:E()("day",{"current-day":l}),width:c,height:c,rx:50,ry:50,fill:v,y:m(e)*c+m(e)*i+i,x:(f(e)-f(new Date(e.getFullYear(),e.getMonth(),1)))*c+(f(e)-f(new Date(e.getFullYear(),e.getMonth(),1)))*i+i,onMouseOver:function(t){return n.setState({showTooltip:e,count:a[p]?a[p]:0,style:{top:t.clientY+10,left:t.clientX+10}})},onMouseOut:function(){return n.setState({showTooltip:!1})},onClick:function(){return n.renderChart(e)}})}}]),t}(r.a.Component)),R=Object(l.b)(null,function(e){return{showRadialChart:function(t){return e(function(e){return{type:"SHOW_RADIAL_CHART",val:e}}(t))},selectDay:function(t){return e(function(e){return{type:"SELECT_DAY",val:e}}(t))}}})(H),L=Object(l.b)(function(e){return{dayInsights:e.app.dayInsights,selectedDay:e.radialChart.selectedDay}})(function(e){var t=e.dayInsights[e.selectedDay],a=(w.h().range(["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]),w.e("s")),n=w.a().startAngle(function(e,t){return 2*t*Math.PI/s}).endAngle(function(e,t){return 2*(t+1)*Math.PI/s}).innerRadius(0),i=(t&&t.map(function(t){var a=d()("".concat(e.selectedDay," ").concat(t));return a.minute()||a.second()||a.millisecond()?parseInt(a.add(1,"hour").startOf("hour").format("HH")):parseInt(a.startOf("hour").toString().format("HH"))})).reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),c=(Object(M.a)(Array(24).keys()),"m0 -".concat(266.5," a").concat(266.5," ").concat(266.5," 0 1,1 -0.01 0")),l=Object(M.a)(Array(12).keys()),s=12,o=w.d(Object.values(i),function(e){return e});o&&w.g().domain(o).range([0,260]),o&&w.g().domain(o).range([0,-260]),w.b().ticks(3).tickFormat(a);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"dayLabel"},d()(e.selectedDay).format("dddd, MMMM DD YYYY")),r.a.createElement("div",{className:"dayOverview"},t?r.a.createElement("svg",{className:"radialBarChart",width:960,height:600},r.a.createElement("g",{transform:"translate(480,300)"},r.a.createElement("circle",{r:260,className:"circle"}),r.a.createElement("g",{className:"labels"},r.a.createElement("def",null,r.a.createElement("path",{id:"labelPath",d:c})),l.map(function(e,t){return r.a.createElement("text",{textAnchor:"middle"},r.a.createElement("textPath",{startOffset:"".concat(100*t/s+50/s,"%"),xlinkHref:"#labelPath"},e+1))})),Object.values({0:4,1:10,2:3,3:0,4:0,5:5,6:1,7:8,8:9,9:0,10:0,11:2}).map(function(e,t){return r.a.createElement("path",{d:"".concat(n(e,t))})}))):r.a.createElement("span",null,"No data recorded")))}),W=(a(38),Object(l.b)(function(e){return{data:e.app.data,dayInsights:e.app.dayInsights,files:e.app.files,isCalendarVisible:e.calendar.isCalendarVisible,isRadialChartVisible:e.radialChart.isRadialChartVisible}},function(e){return{uploadFile:function(t){return e(function(e){return{type:"UPLOAD_FILE",val:e}}(t))},showCalendar:function(t){return e(function(e){return{type:"SHOW_CALENDAR",val:e}}(t))},setData:function(t){return e(function(e){return{type:"SET_DATA",val:e}}(t))}}})(function(e){var t=e.files.map(function(e){return r.a.createElement("span",null,r.a.createElement("b",{key:e.name},e.name),r.a.createElement("div",{className:"file-size"},function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(e.size)))});return r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"title"}," Visualizing Time-Series Data ")),r.a.createElement("div",{className:"content"},r.a.createElement("section",null,r.a.createElement("p",null,"Upload file"),r.a.createElement(O.a,{accept:"text/csv",onDrop:function(t,a){e.uploadFile(t),t.forEach(function(t){var a=new FileReader;a.onload=function(){var t=a.result,n=w.c(t);e.setData(n),e.showCalendar(!0)},a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.readAsBinaryString(t)})}},function(e){var a=e.getRootProps,n=e.getInputProps,i=e.isDragActive;return r.a.createElement("div",Object.assign({},a(),{className:E()("dropzone",{"dropzone--isActive":i,"dropzone--isDone":!!t.length})}),r.a.createElement("input",n()),t.length?r.a.createElement("span",{className:"file-name"},r.a.createElement("i",{className:"fa fa-remove"}),t):r.a.createElement("span",{className:"upload-message"},r.a.createElement("i",{className:"fa fa-upload"}),"Drag & Drop your file or ",r.a.createElement("u",null,"Browse")))})),e.isCalendarVisible&&r.a.createElement("section",null,r.a.createElement("p",null,"Calendar heatmap"),r.a.createElement(R,{data:e.data,dayInsights:e.dayInsights})),e.isRadialChartVisible&&r.a.createElement("section",null,r.a.createElement("p",null,"Day overview"),r.a.createElement(L,{key:e.data}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=Object(s.c)(b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(l.a,{store:B},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.af5b4035.chunk.js.map